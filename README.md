# REST-API - permissions service

## Overview
The skeleton for this server was generated by the [nestjs](https://docs.nestjs.com) framework. By running:

```
$ npm i -g @nestjs/cli
$ nest new project-name
```

you can easily generate a server stub.

This example uses the typeORM module which communicates with a mySQL server.
The generated server runs inside a docker container.

## Requirements
```
docker
docker-compose
```
## Usage
To run the server, execute the following from the root directory:

```
yarn
docker-compose up --build
```

To launch the unit tests suite, use:
```
yarn jest
```

## Context

This service simulates a user role assignment system, where users are entered into the database and assigned specific roles.

## Testing
It's possible to test the API contracts using Postman. The API will be running on http://localhost:3000/.

With POST requests it is possible to create roles by sending a body to http://localhost:3000/roles with the following structure:

```
{
  "name":"Administrator"
}
```

Or Users with the following structure to http://localhost:3000/users:
```
{
	"username": "JoaoLikesCats",
	"password": "joaolikescats123!",
	"email": "joao@testMail.com",
	"avatar": "slash.png",
	"roles": [{"name":"Administrator"}, {"name":"Owner"}]
}
```

The API performs validation on mandatory fields, e.g, usernames must not be empty strings, emails must have a valid format, user payloads must contain at least two roles etc.

Hitting GET requests to the same addresses will pull all records from their respective database tables.
